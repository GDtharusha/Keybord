<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>KeyBord Tools</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            color: #fff; min-height: 100vh; padding: 12px;
            user-select: none; overflow-x: hidden;
        }
        .header { text-align: center; padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.1); margin-bottom: 12px; }
        .header h1 { font-size: 18px; display: flex; align-items: center; justify-content: center; gap: 6px; }
        
        .tabs { display: flex; gap: 6px; margin-bottom: 12px; }
        .tab { flex: 1; padding: 10px; background: rgba(255,255,255,0.05); border: none; border-radius: 8px; color: #888; font-size: 12px; font-weight: 600; cursor: pointer; }
        .tab.active { background: #3b82f6; color: #fff; }
        
        .panel { display: none; }
        .panel.active { display: block; }
        
        .quick-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; margin-bottom: 12px; }
        .quick-btn { padding: 14px 6px; background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.1); border-radius: 10px; color: #fff; font-size: 11px; text-align: center; cursor: pointer; }
        .quick-btn:active { transform: scale(0.95); background: rgba(255,255,255,0.15); }
        .quick-btn .icon { font-size: 22px; margin-bottom: 4px; display: block; }
        
        /* Console - Text display only */
        .console-box { background: #000; border-radius: 8px; padding: 10px; margin-bottom: 10px; }
        .console-label { color: #0f0; font-size: 10px; margin-bottom: 6px; font-family: monospace; }
        
        .api-list { background: rgba(0,0,0,0.5); border: 1px solid #333; border-radius: 6px; padding: 10px; max-height: 200px; overflow-y: auto; }
        .api-item { font-family: monospace; font-size: 11px; color: #0f0; padding: 6px 0; border-bottom: 1px solid #222; }
        .api-item:last-child { border-bottom: none; }
        .api-item .name { color: #ff0; }
        .api-item .desc { color: #888; font-size: 9px; margin-top: 2px; }
        
        .test-section { margin-top: 12px; background: rgba(0,0,0,0.3); border-radius: 8px; padding: 10px; }
        .test-section label { font-size: 11px; color: #888; display: block; margin-bottom: 6px; }
        .test-input { width: 100%; padding: 10px; background: #000; border: 1px solid #333; border-radius: 6px; color: #fff; font-family: monospace; font-size: 12px; }
        .test-input:focus { outline: none; border-color: #0f0; }
        .test-btns { display: flex; gap: 6px; margin-top: 8px; }
        .test-btn { flex: 1; padding: 10px; border: none; border-radius: 6px; font-weight: 600; cursor: pointer; font-size: 11px; }
        .test-btn.run { background: #0f0; color: #000; }
        .test-btn.clear { background: #333; color: #fff; }
        #testResult { margin-top: 8px; padding: 8px; background: #000; border-radius: 4px; font-family: monospace; font-size: 10px; color: #0f0; min-height: 30px; }
        
        .text-tool { background: rgba(255,255,255,0.05); border-radius: 8px; padding: 12px; margin-bottom: 10px; }
        .text-tool label { font-size: 11px; color: #888; display: block; margin-bottom: 6px; }
        .text-tool textarea { width: 100%; height: 50px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1); border-radius: 6px; color: #fff; padding: 8px; font-size: 13px; resize: none; }
        .text-tool textarea:focus { outline: none; border-color: #3b82f6; }
        .tool-btns { display: flex; gap: 6px; margin-top: 8px; }
        .tool-btn { flex: 1; padding: 8px; background: #3b82f6; border: none; border-radius: 6px; color: #fff; font-size: 11px; font-weight: 600; cursor: pointer; }
        .tool-btn:active { opacity: 0.8; }
        .tool-btn.secondary { background: rgba(255,255,255,0.1); }
        
        .footer { display: flex; gap: 8px; margin-top: 12px; padding-top: 12px; border-top: 1px solid rgba(255,255,255,0.1); }
        .footer-btn { flex: 1; padding: 12px; background: rgba(255,255,255,0.08); border: none; border-radius: 8px; color: #fff; font-size: 12px; font-weight: 500; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 5px; }
        .footer-btn:active { background: rgba(255,255,255,0.15); }
        .footer-btn.danger { background: rgba(239,68,68,0.2); color: #ef4444; }
    </style>
</head>
<body>
    <div class="header"><h1>‚ú® KeyBord Tools</h1></div>
    
    <div class="tabs">
        <button class="tab active" onclick="showPanel('quick')">‚ö° Quick</button>
        <button class="tab" onclick="showPanel('console')">üñ•Ô∏è Console</button>
        <button class="tab" onclick="showPanel('text')">üìù Text</button>
    </div>
    
    <!-- Quick Panel -->
    <div id="panel-quick" class="panel active">
        <div class="quick-grid">
            <div class="quick-btn" onclick="doPaste()"><span class="icon">üì•</span>Paste</div>
            <div class="quick-btn" onclick="doClear()"><span class="icon">üóëÔ∏è</span>Clear</div>
            <div class="quick-btn" onclick="doNewline()"><span class="icon">‚Üµ</span>New Line</div>
        </div>
        <div class="quick-grid">
            <div class="quick-btn" onclick="insertEmoji('üòÄ')"><span class="icon">üòÄ</span></div>
            <div class="quick-btn" onclick="insertEmoji('‚ù§Ô∏è')"><span class="icon">‚ù§Ô∏è</span></div>
            <div class="quick-btn" onclick="insertEmoji('üëç')"><span class="icon">üëç</span></div>
            <div class="quick-btn" onclick="insertEmoji('üî•')"><span class="icon">üî•</span></div>
            <div class="quick-btn" onclick="insertEmoji('‚ú®')"><span class="icon">‚ú®</span></div>
            <div class="quick-btn" onclick="insertEmoji('üéâ')"><span class="icon">üéâ</span></div>
        </div>
    </div>
    
    <!-- Console Panel - API Reference (text only) + Test Input -->
    <div id="panel-console" class="panel">
        <div class="console-box">
            <div class="console-label">üìñ API Reference (copy and test below)</div>
            <div class="api-list">
                <div class="api-item"><span class="name">Android.typeText("text")</span><div class="desc">Type text to original input</div></div>
                <div class="api-item"><span class="name">Android.backspace()</span><div class="desc">Delete one character</div></div>
                <div class="api-item"><span class="name">Android.enter()</span><div class="desc">Press enter key</div></div>
                <div class="api-item"><span class="name">Android.paste()</span><div class="desc">Paste from clipboard</div></div>
                <div class="api-item"><span class="name">Android.clearAll()</span><div class="desc">Clear all text</div></div>
                <div class="api-item"><span class="name">Android.copyToClipboard("text")</span><div class="desc">Copy text to clipboard</div></div>
                <div class="api-item"><span class="name">Android.getClipboardText()</span><div class="desc">Get clipboard text</div></div>
                <div class="api-item"><span class="name">Android.vibrate(50)</span><div class="desc">Vibrate for ms</div></div>
                <div class="api-item"><span class="name">Android.toast("msg")</span><div class="desc">Show toast message</div></div>
                <div class="api-item"><span class="name">Android.close()</span><div class="desc">Close popup</div></div>
                <div class="api-item"><span class="name">Android.hideKeyboard()</span><div class="desc">Hide keyboard</div></div>
            </div>
        </div>
        
        <div class="test-section">
            <label>üß™ Test API Commands</label>
            <input type="text" class="test-input" id="testInput" placeholder="Android.typeText('Hello')" />
            <div class="test-btns">
                <button class="test-btn run" onclick="runTest()">‚ñ∂ Run</button>
                <button class="test-btn clear" onclick="clearTest()">‚úï Clear</button>
            </div>
            <div id="testResult">Ready...</div>
        </div>
    </div>
    
    <!-- Text Panel -->
    <div id="panel-text" class="panel">
        <div class="text-tool">
            <label>üìù Quick Type</label>
            <textarea id="quickTypeText" placeholder="Type text to insert..."></textarea>
            <div class="tool-btns">
                <button class="tool-btn" onclick="typeQuickText()">‚å®Ô∏è Type</button>
                <button class="tool-btn secondary" onclick="copyQuickText()">üìã Copy</button>
            </div>
        </div>
        <div class="text-tool">
            <label>üî§ Templates</label>
            <div class="tool-btns">
                <button class="tool-btn secondary" onclick="typeTemplate('email')">üìß Email</button>
                <button class="tool-btn secondary" onclick="typeTemplate('phone')">üì± Phone</button>
            </div>
        </div>
    </div>
    
    <div class="footer">
        <button class="footer-btn" onclick="openSettings()">‚öôÔ∏è Settings</button>
        <button class="footer-btn danger" onclick="closePopup()">‚úï Close</button>
    </div>
    
    <script>
        function showPanel(name) {
            document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.getElementById('panel-' + name).classList.add('active');
            event.target.classList.add('active');
        }
        
        // Quick actions - these use Android bridge to type to ORIGINAL input
        function doPaste() { if(typeof Android!=='undefined') Android.paste(); }
        function doClear() { if(typeof Android!=='undefined') Android.clearAll(); }
        function doNewline() { if(typeof Android!=='undefined') { Android.typeText('\n'); } }
        function insertEmoji(e) { if(typeof Android!=='undefined') Android.typeText(e); }
        
        // Console test - run code from test input
        function runTest() {
            var code = document.getElementById('testInput').value.trim();
            var result = document.getElementById('testResult');
            if(!code) { result.innerHTML = '<span style="color:#f44">Enter a command</span>'; return; }
            try { 
                var r = eval(code); 
                result.innerHTML = '<span style="color:#0f0">‚úì ' + (r!==undefined ? JSON.stringify(r) : 'OK') + '</span>'; 
            } catch(e) { 
                result.innerHTML = '<span style="color:#f44">‚úó ' + e.message + '</span>'; 
            }
        }
        
        function clearTest() { 
            document.getElementById('testInput').value = ''; 
            document.getElementById('testResult').innerHTML = 'Cleared'; 
        }
        
        // Text tools
        function typeQuickText() {
            var t = document.getElementById('quickTypeText').value;
            if(t && typeof Android!=='undefined') Android.typeText(t);
        }
        function copyQuickText() {
            var t = document.getElementById('quickTypeText').value;
            if(t && typeof Android!=='undefined') { Android.copyToClipboard(t); Android.toast('Copied!'); }
        }
        function typeTemplate(type) {
            var tpl = { email: 'example@email.com', phone: '+94 77 123 4567' };
            if(typeof Android!=='undefined') Android.typeText(tpl[type]);
        }
        
        function openSettings() { if(typeof Android!=='undefined') Android.openSettings(); }
        function closePopup() { if(typeof Android!=='undefined') Android.close(); }
        
        // Allow test input to be typed in (don't intercept)
        document.getElementById('testInput').addEventListener('focus', function() {
            // Input is focused - WebView handles this
        });
    </script>
</body>
</html>